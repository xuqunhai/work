

---------------------- 查看用户 ----------------------------

whoami 和 who am i 区别：
两者都是查看用户，
不过前者实时显示此刻用户，即用户切换时就显示切换后用户，
而后者总是显示终端初始用户，不会随着用户切换变化；



who am i输出说明：
输出的第一列表示打开当前伪终端的用户的用户名（要查看当前登录用户的用户名，去掉空格直接使用 whoami 即可），
第二列的 pts/0 中 pts 表示伪终端，所谓伪是相对于 /dev/tty 设备而言的，
还记得上一节讲终端时的那七个使用 [Ctrl]+[Alt]+[F1]～[F7] 进行切换的 /dev/tty 设备么，这是“真终端”，
伪终端就是当你在图形用户界面使用 /dev/tty7 时每打开一个终端就会产生一个伪终端，
pts/0 后面那个数字就表示打开的伪终端序号，你可以尝试再打开一个终端，然后在里面输入 who am i，看第二列是不是就变成 pts/1 了，
第三列则表示当前伪终端的启动时间。


who 命令其它常用参数

who -q
打印当前登录用户数及用户名


----------------------- 创建/切换 用户 ---------------------------



大部分 Linux 系统在安装时都会建议用户新建一个用户而不是直接使用 root 用户进行登录，
当然也有直接使用 root 登录的例如 Kali（基于 Debian 的 Linux 发行版，集成大量工具软件，主要用于数字取证的操作系统）。
一般我们登录系统时都是以普通账户的身份登录的，
要创建用户需要 root 权限，这里就要用到 sudo 这个命令了。
不过使用这个命令有两个大前提，
一是你要知道当前登录用户的密码，
二是当前用户必须在 sudo 用户组。


su <user> 可以切换到用户 user，执行时需要输入目标用户的密码，
sudo <cmd> 可以以特权级别运行 cmd 命令，需要当前用户属于 sudo 组，且需要输入当前用户的密码。
su - <user> 命令也是切换用户，但是同时用户的环境变量和工作目录也会跟着改变成目标用户所对应的。


新建一个叫 lilei 的用户：

sudo adduser lilei

这个命令不但可以添加用户到系统，同时也会默认为新用户在 /home 目录下创建一个工作目录

使用如下命令切换登录用户：

su -l lilei

然后使用whoami查看当前登陆用户名，注意，如果输入who am i会显示当前伪终端的用户

退出当前用户跟退出终端一样，可以使用 exit 命令或者使用快捷键 Ctrl+D。



------------------------- 查看所属用户组 -------------------------



在 Linux 里面如何知道自己属于哪些用户组呢？

方法一：使用 groups 命令
groups shiyanlou

其中冒号之前表示用户，后面表示该用户所属的用户组。
这里可以看到 shiyanlou 用户属于 shiyanlou 用户组，
每次新建用户如果不指定用户组的话，默认会自动创建一个与用户名相同的用户组


默认情况下在 sudo 用户组里的可以使用 sudo 命令获得 root 权限。
shiyanlou 用户也可以使用 sudo 命令，为什么这里没有显示在 sudo 用户组里呢？
可以查看下 /etc/sudoers.d/shiyanlou 文件，
我们在 /etc/sudoers.d 目录下创建了这个文件，从而给 shiyanlou 用户赋予了 sudo 权限：
shiyanlou ALL=(ALL) NOPASSWD: ALL
Defaults:shiyanlou !requiretty



方法二：查看 /etc/group 文件
cat /etc/group | sort

 cat 命令用于读取指定文件的内容并打印到终端输出，
 | sort 表示将读取的文本进行一个字典排序再输出，


可以使用 grep 命令过滤掉一些你不想看到的结果：

cat /etc/group | grep -E "shiyanlou"
// sudo:x:27:shiyanlou,labex


/etc/group 文件格式说明
/etc/group 的内容包括用户组（Group）、用户组口令、GID（组 ID） 及该用户组所包含的用户（User），每个用户组一条记录。格式如下：

group_name:password:GID:user_list
上面的 password 字段为一个 x，并不是说密码就是它，只是表示密码不可见而已。


如果用户的 GID 等于用户组的 GID，那么最后一个字段 user_list 就是空的，这里的 GID 是指用户默认所在组的 GID，可以使用 id 命令查看。
id shiyanlou
// uid=5000 gid=5000 组=5000(shiyanlou),27(sudo),5002(public)


------------------------ 赋予root权限 --------------------------


用 shiyanlou 用户执行 sudo 命令将 lilei 添加到 sudo 用户组，让它也可以使用 sudo 命令获得 root 权限
groups lilei
sudo usermod -G sudo lilei
groups lilei

然后你再切换回 lilei 用户，现在就可以使用 sudo 获取 root 权限了。
su - lilei
sudo ls /

修改密码：可以通过 sudo passwd shiyanlou 进行设置


----------------------- 删除 用户/用户组 ---------------------------

删除用户是很简单的事：

sudo deluser lilei --remove-home
使用 --remove-home 参数在删除用户时候会一并将该用户的工作目录一并删除。
如果不加这个参数，那么系统会自动在 /home 目录为该用户保留工作目录。

删除用户组可以使用 groupdel 命令，倘若该群组中仍包括某些用户，则必须先删除这些用户后，才能删除群组。
